{"remainingRequest":"/Users/sagarmahapatra/personal/website/sunshine/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sagarmahapatra/personal/website/sunshine/components/Sticker.vue?vue&type=style&index=0&lang=stylus&","dependencies":[{"path":"/Users/sagarmahapatra/personal/website/sunshine/components/Sticker.vue","mtime":1584660158000},{"path":"/Users/sagarmahapatra/personal/website/sunshine/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sagarmahapatra/personal/website/sunshine/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/sagarmahapatra/personal/website/sunshine/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/sagarmahapatra/personal/website/sunshine/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/sagarmahapatra/personal/website/sunshine/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sagarmahapatra/personal/website/sunshine/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnN0aWNrZXIKICBwb3NpdGlvbjogZml4ZWQ7CgogICYuc3RpY2stZmxvYXQKICAgIHRvcDogYXV0bzsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsK"},{"version":3,"sources":["Sticker.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;;AAEA;AACA;AACA","file":"Sticker.vue","sourceRoot":"components","sourcesContent":["<template>\n  <component :is=\"tag || 'div'\"\n             class=\"sticker\"\n             :class=\"needFloat ? [ 'stick-float' ] : undefined\"\n             :style=\"needFloat ? { bottom: `${stickBottom}px` } : undefined\">\n    <slot></slot>\n  </component>\n</template>\n\n<script>\n  import { findContainerInVm } from './util';\n  export default {\n    props: ['stick', 'tag'],\n\n    data() {\n      return {\n        needFloat: false,\n        stickBottom: 0,\n      }\n    },\n\n    watch: {\n      stick() {\n        this.unStick();\n        this.stickHandle();\n      }\n    },\n\n    methods: {\n      stickHandle() {\n        if (!this.stick) return;\n        const stickElement = findContainerInVm(this.stick, this);\n        if (!stickElement) return;\n\n        this._stickerScroll = () => {\n          const rect = this.$el.getBoundingClientRect();\n          const scrollTop = document.body.scrollTop + document.documentElement.scrollTop;\n          this.needFloat = (document.body.offsetHeight - scrollTop - rect.height) < stickElement.offsetHeight;\n          this.stickBottom = stickElement.offsetHeight;\n        }\n\n        this._stickerScroll();\n        window.addEventListener(\"scroll\", this._stickerScroll);\n      },\n\n      unStick() {\n        this.needFloat = false;\n        this.stickBottom = 0;\n        window.removeEventListener(\"scroll\", this._stickerScroll);\n      },\n    },\n\n    mounted() {\n      this.stickHandle();\n    },\n\n    beforeDestroy() {\n      this.unStick();\n    }\n  }\n</script>\n\n<style lang=\"stylus\">\n  .sticker\n    position: fixed;\n\n    &.stick-float\n      top: auto;\n      position: absolute;\n</style>\n\n"]}]}